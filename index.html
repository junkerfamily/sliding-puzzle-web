<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sliding Puzzle Game</title>
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>
    <div id="game-container">
        <h1>4x4 Sliding Puzzle</h1>
        <div id="puzzle-board">
            <canvas id="puzzleCanvas"></canvas>
        </div>
        <div class="button-container">
            <button id="load-image">Load Image</button>
            <input type="file" id="image-upload" accept="image/*" style="display: none;">
            <button id="reset-game">Reset</button>
            <button id="solve-puzzle">Solve Puzzle</button>
            <div class="option-container">
                <input type="checkbox" id="show-numbers" checked>
                <label for="show-numbers">Show Numbers</label>
                <span id="move-counter">Moves: 0</span>
            </div>
            <div class="option-container">
                <input type="checkbox" id="two-empty-tiles">
                <label for="two-empty-tiles">2 Empty Tiles</label>
            </div>
                <!-- Add this after your game options -->
            <div class="option-container">
                <button id="show-history">My Puzzle History</button>
            </div>
        </div>
    </div>

    <!-- Add this at the end of the body but before scripts -->
    <div id="history-modal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h2>Your Puzzle History</h2>
            <table id="history-table">
                <thead>
                    <tr>
                        <th>Puzzle</th>
                        <th>Date</th>
                        <th>Settings</th>
                        <th>Moves</th>
                    </tr>
                </thead>
                <tbody id="history-data"></tbody>
            </table>
            
            <!-- Add the clear history button here -->
            <div style="text-align: center; margin-top: 20px;">
                <button id="clear-history" class="danger-button">Clear My Puzzle History</button>
            </div>
        </div>
    </div>
    <div id="image-viewer-modal" class="modal">
        <div class="modal-content" style="text-align: center; max-width: 80%;">
            <span class="close">&times;</span>
            <h2 id="image-viewer-title">Completed Puzzle</h2>
            <div id="image-viewer-container">
                <img id="full-size-image" style="max-width: 100%; max-height: 70vh;">
            </div>
            <div id="image-viewer-details" style="margin-top: 10px;"></div>
        </div>
    </div>
   
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-check-compat.js"></script>
    <script>
      // After initializing Firebase
      firebase.appCheck().activate('YOUR_RECAPTCHA_KEY', true);
    </script>

    <!-- Firebase App (the core Firebase SDK) -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <!-- Firebase Auth -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
    <!-- Firebase Firestore -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>
    <!-- Firebase Storage -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-storage-compat.js"></script>

    <script>
        // Your web app's Firebase configuration
        const firebaseConfig = {
          apiKey: "AIzaSyCJYl_O-Rgf-3c0mFmSc2U1EhLt5CQ6ke4",
          authDomain: "sliding-puzzle-game-48250.firebaseapp.com",
          projectId: "sliding-puzzle-game-48250",
          storageBucket: "sliding-puzzle-game-48250.appspot.com",
          messagingSenderId: "87621162900",
          appId: "1:87621162900:web:680a2c7ebe6d3ddbeba181"
        };
      
        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);
        
        // Check Firebase status
        console.log("Firebase SDK loaded, authentication starting...");
      </script>

    <script src="js/puzzle.js" defer></script>
</body>
</html>